/* -------------------------------------------------------------
   Teaching & Collaboration — Cinematic Scroll Story Styles
   All rules are scoped to the section so they don’t clash globally
   ------------------------------------------------------------- */

/* Utility — section wrapper is already #teaching-collaborative-piano */
#teaching-collaborative-piano {
    position: relative;
    padding: var(--spacing-lg) 0 0;
    background: transparent; /* Background is now handled by #dynamicBg */
}

#teaching-collaborative-piano .section-title {
    color: #ffffff;
    margin-bottom: var(--spacing-lg);
    position: relative; /* Needed for z-index */
    z-index: 3; /* Ensure title is above the dynamic background */
}

#teaching-collaborative-piano .section-title::after {
    background-color: rgba(255, 255, 255, 0.4);
}

.tc-content-wrapper {
    position: relative;
    z-index: 1; /* Enforce stacking order below nav dots */
    color: #ffffff;
    background: transparent; /* Let parent background show through */
    overflow: hidden;
    font-family: var(--font-body, 'Georgia', serif);
}
  
  /* Loading overlay */
  .loading {
    position: fixed;
    inset: 0;
    background: #0a0a0a;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.8s ease;
  }
  .loading.hidden { opacity: 0; pointer-events: none; }
  .loading-text { font-size: 1.2rem; opacity: 0.8; }
  
  /* Progress bar */
  .dynamic-bg { position:absolute; top:0; left:0; width:100%; height:100%; z-index: 0; will-change:background; }
  .progress-bar { position: fixed; top: 0; left: 0; width: 100%; height: 2px; background: rgba(255,255,255,0.03); z-index: 1001; backdrop-filter: blur(1px); }
  .progress-fill { height: 100%; width: 0%; background: rgba(255,255,255,0.7); box-shadow: 0 0 10px rgba(255,255,255,0.15); will-change: width; transition: width 0.1s linear; }
  
  /* Navigation dots */
  .nav-dots { position: fixed; right: 24px; top: 50%; transform: translateY(-50%); z-index: 1000; display: flex; flex-direction: column; gap: 12px; /* mix-blend-mode: overlay; /* Removed to ensure visibility on all backgrounds */ }
  .nav-dot { width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,0.15); backdrop-filter: blur(1px); cursor: pointer; transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); position: relative; opacity: 0.7; }
  .nav-dot:hover { transform: scale(1.2); background: rgba(255,255,255,0.3); opacity: 0.9; }
  .nav-dot.active { width: 8px; height: 8px; background: rgba(255,255,255,0.9); box-shadow: 0 0 8px rgba(255,255,255,0.4); opacity: 1; }
  
  /* Hidden state for nav dots & progress bar */
  .nav-dots.hidden, .progress-bar.hidden { opacity: 0; pointer-events: none; }
  
  /* Story wrapper (pinned) */
  .story-wrapper { height:100vh; overflow:hidden; position:relative; z-index: 2; /* Set stacking order below nav dots */ }
  .panels-container { display:flex; width:600%; height:100vh; will-change:transform; }
  .panel { width:16.666%; height:100vh; display:flex; align-items:center; justify-content:center; position:relative; flex-shrink:0; padding:0 40px; box-sizing:border-box; }
  
  /* Dynamic background */
  /* Dynamic background container - individual layers will handle gradients */
  .dynamic-bg { position:absolute; inset:0; z-index:-1; background:none; overflow:hidden; }
  /* Background gradient layers */
  .bg-layer { position:absolute; inset:0; }
  .bg-panel-1{background:linear-gradient(135deg,#1e293b 0%, #312e81 100%);} .bg-panel-2{background:linear-gradient(135deg,#312e81 0%, #4338ca 100%);} .bg-panel-3{background:linear-gradient(135deg,#4338ca 0%, #6366f1 100%);} .bg-panel-4{background:linear-gradient(135deg,#6366f1 0%, #6d7199 100%);} .bg-panel-5{background:linear-gradient(135deg,#6d7199 0%, #7c8bb3 100%);} .bg-panel-6{background:linear-gradient(135deg,#7c8bb3 0%, #8b9bb8 100%);} 
  
  /* Panel content */
  .panel-content { max-width:800px; text-align:left; opacity:0.3; transform:scale(0.8); will-change:transform,opacity; transition:all 0.8s ease; padding-block:6vh; }
  .panel.active .panel-content { opacity:1; transform:scale(1); }
  .panel h2 { font-size:clamp(2.2rem,3.5vw,3.5rem); margin:0 0 2.4rem; font-weight:300; letter-spacing:-0.02em; transform:translateY(20px); opacity:0; transition:all 0.8s ease 0.2s; line-height:1.1; position:relative; }
  .panel.active h2 { transform:translateY(0); opacity:1; }
  
  /* Slick short line divider */
  .panel h2::after { 
    content: ''; 
    position: absolute; 
    bottom: -1.2rem; 
    left: 0; 
    width: 0; 
    height: 2px; 
    background: linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,0.9) 70%, transparent 100%); 
    box-shadow: 0 0 12px rgba(255,255,255,0.4), 0 0 24px rgba(255,255,255,0.2); 
    border-radius: 1px;
    transition: width 1.4s cubic-bezier(0.16, 1, 0.3, 1) 0.8s; 
  }
  .panel.active h2::after { width: 60px; }
  
  /* Decorative end dot */
  .panel h2::before { 
    content: ''; 
    position: absolute; 
    bottom: -1.25rem; 
    left: 80px; 
    width: 4px; 
    height: 4px; 
    background: rgba(255,255,255,1); 
    border-radius: 50%; 
    transform: scale(0); 
    box-shadow: 0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(255,255,255,0.4); 
    transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 2s; 
  }
  .panel.active h2::before { transform: scale(1); }
  .panel p { font-size:clamp(1.2rem,1.8vw,1.6rem); line-height:1.75; opacity:0; transform:translateY(20px); transition:all 0.8s ease 0.4s; margin-bottom:1rem; text-align:justify; text-align-last:left; }
  .panel.active p { opacity:0.9; transform:translateY(0); }
  
  /* Spacer for scroll distance */
  .scroll-spacer { height:0; display:none; }
  
  /* Responsive tweaks */
  /* Width-based responsiveness */
  @media(max-width:900px){ .panel{align-items:center;} .panel-content{margin:8vh auto;} }
  @media(max-width:600px){ .panel-content{margin:5vh auto;} .panel h2{font-size:1.8rem;} .panel p{font-size:1rem;} .nav-dots{right:20px; gap:12px;} .nav-dot{width:10px; height:10px;} }
  @media(min-width:1250px){ .panel-content{max-width:1220px; padding:0 60px;} .panel h2{font-size:3.2rem;} .panel p{font-size:1.6rem;} }
  /* Override ultra-wide screens: keep same sizes to prevent runaway scaling */
@media(min-width:1800px){ .panel h2{font-size:3.2rem;} .panel p{font-size:1.6rem;} }

  /* Height-based responsive font sizing for panel text */
  @media(max-height:1000px){
    .panel h2 { font-size:clamp(2rem, 3vw, 3rem); }
    .panel p { font-size:clamp(1.1rem, 1.6vw, 1.4rem); line-height: 1.65; }
    .panel-content { padding-block: 5vh; }
  }

  @media(max-height:900px){
    .panel h2 { font-size:clamp(1.8rem, 2.8vw, 2.8rem); margin-bottom: 2.4rem; }
    .panel p { font-size:clamp(1rem, 1.4vw, 1.3rem); line-height: 1.6; }
    .panel-content { padding-block: 4vh; }
  }




